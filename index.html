<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

    <!-- Begin Jekyll SEO tag v2.6.1 -->
    <title>LuKks | Lucas Barrena</title>
    <meta name="generator" content="Jekyll v3.8.5" />
    <meta property="og:title" content="LuKks" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="Lucas Barrena" />
    <meta property="og:description" content="Lucas Barrena" />
    <link rel="canonical" href="http://lukks.js.org/" />
    <meta property="og:url" content="http://lukks.js.org/" />
    <meta property="og:site_name" content="LuKks" />
    <script type="application/ld+json">
    {"@type":"WebSite","url":"http://lukks.js.org/","headline":"LuKks","name":"LuKks","description":"Lucas Barrena","@context":"https://schema.org"}
    </script>
    <!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>
    <section class="page-header" style="padding: 2rem 1rem; padding-bottom: 1rem;">
      <h1 class="project-name">LuKks</h1>
      <h2 class="project-tagline" style="margin-block-start: 0; margin-bottom: 1rem;">Lucas Barrena</h2>
      <a href="https://github.com/LuKks" class="btn">View on GitHub</a>
      
      <h2 class="project-tagline">
        <div>
          <img src="https://icon-library.net/images/music-icon-white/music-icon-white-7.jpg" style="width: 24px; vertical-align: middle;">
          <data id="jarvis-vlc">Offline</data>
        </div>

        <div>
          <img src="https://icon-library.net/images/white-speaker-icon/white-speaker-icon-24.jpg" style="width: 24px; vertical-align: middle;">
          <data id="jarvis-vlc-volume">Offline</data>
        </div>

        <div>
          <img src="https://i.imgur.com/vwOmaMk.png" style="width: 24px;vertical-align: middle;">
          <data id="jarvis-window">Offline</data>
        </div>

        <div>
          <img src="https://i.imgur.com/YE7as9q.png" style="width: 24px; vertical-align: middle;">
          <data id="jarvis-mouse">Offline</data>
        </div>

        <div>
          <img src="https://i.imgur.com/Hw8QAN8.png" style="width: 24px; vertical-align: middle;">
          <data id="jarvis-keyboard">Offline</data>
        </div>
      </h2>
    </section>

    <section class="main-content">
      <ul>
        <li>What's next?</li>
        <li>Done but still private: forex <em>real-time attosecond 1e18 data</em></li>
        <li><a href="https://github.com/LuKks/neural-go">neural-go</a> genetic neural networks <img src="https://img.shields.io/github/stars/LuKks/neural-go?style=plastic" alt="GitHub stars"></li>
        <li><a href="https://github.com/LuKks/like-events">like-events</a> async events for better flow <img src="https://img.shields.io/npm/dt/like-events.svg?style=plastic" alt=""></li>
        <li><a href="https://github.com/LuKks/like-mysql">like-mysql</a> intuitive ORM for MySQL <img src="https://img.shields.io/npm/dt/like-mysql.svg?style=plastic" alt=""></li>
        <li><a href="https://github.com/LuKks/like-process">like-process</a> handle resources and events for gracefully exit <img src="https://img.shields.io/npm/dt/like-process.svg?style=plastic" alt=""></li>
        <li><a href="https://github.com/LuKks/arduino-timer">arduino-timer</a> delay without blocking <img src="https://img.shields.io/github/stars/lukks/arduino-timer?style=plastic" alt="GitHub stars"></li>
        <li><a href="https://github.com/LuKks/like-server">like-server</a> keep-alive done right at socket level <img src="https://img.shields.io/npm/dt/like-server.svg?style=plastic" alt=""></li>
        <li><a href="https://github.com/LuKks/neural-amxx">neural-amxx</a> deep feedforward neural networks <img src="https://img.shields.io/github/stars/lukks/neural-amxx?style=plastic" alt="GitHub stars"></li>
        <li><a href="https://github.com/LuKks/like-json">like-json</a> stringify at perfect performance <img src="https://img.shields.io/npm/dt/like-json.svg?style=plastic" alt=""></li>
      </ul>

      <h2 id="profiles">Profiles</h2>
      <ul>
        <li><a href="https://github.com/LuKks">https://github.com/LuKks</a></li>
        <li><a href="https://www.linkedin.com/in/lucasbarrena">https://www.linkedin.com/in/lucasbarrena</a></li>
        <li><a href="https://amxmodx-es.com/LuKks">https://amxmodx-es.com/LuKks</a></li>
        <li><a href="https://npmjs.com/~lukks">https://npmjs.com/~lukks</a></li>
      </ul>

      <h2 id="license">License</h2>
      <p>Code released under the <a href="https://github.com/LuKks/page/blob/master/LICENSE">MIT License</a>.</p>

      <footer class="site-footer">
        <span class="site-footer-owner">Contact <a href="mailto:lucasbarrena@hotmail.com">lucasbarrena@hotmail.com</a></span>
      </footer>
    </section>

    <script src="https://unpkg.com/node-forge@0.9.1/dist/forge.min.js"></script>
    <script src="https://wzrd.in/standalone/signalhub@latest"></script>

    <script>
    (function () {
      // window.forge.options.usePureJavaScript = true;

      let pubkey = forge.pki.publicKeyFromPem('-----BEGIN PUBLIC KEY-----\
      MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCyJxBQUJyPZYADQmZR3yiLlkbi\
      hVfORy+WmbOxBbir5u8nKYiU9TcN80Yf2UFkt2ocguWq07Bu9kJWFBr6TZIKBVy3\
      QLLKp1YkrYHRExu2UmBOV1H958HMV8qyXoo82lBYSZgOCRyQxBr+hitIUfqN72d5\
      ZHAEBO6cgxt4DyCv5wIDAQAB\
      -----END PUBLIC KEY-----');

      let hub = window.signalhub('jarvis/lukks', [
        'https://evochat.com.ar:3019'
      ]);
      let handlers = {};
      let elems = {};
      let setOffline = {};

      hub.subscribe('events').on('data', function (message) {
        if (typeof message !== 'object' || typeof message.signature !== 'string') {
          return;
        }

        try {
          let verified = pubkey.verify(forge.md.sha1.create().update(JSON.stringify(message.data), 'utf8').digest().bytes(), message.signature);
          if (!verified) {
            return;
          }
        } catch (err) {
          return;
        }

        let events = message.data;
        for (let k in events) {
          let evt = events[k];

          if (window.DEBUG_JARVIS) {
            console.log(evt.name, evt.info);
          }

          let fn = handlers['on' + evt.name];
          if (!fn) {
            return;
          }
          
          fn(evt.info);
          
          clearTimeout(setOffline[evt.name]);
          setOffline[evt.name] = setTimeout(function () {
            fn(undefined);
          }, 5000);
        }
      });
      
      /*It really needs React*/
      handlers.onvlc = function (info) {
        if (info === undefined) {
          byId('jarvis-vlc').innerHTML = 'Offline';
          byId('jarvis-vlc-volume').innerHTML = 'Offline';
          return;
        }

        let time = fmtMSS(info.time) + ' / ' + fmtMSS(info.length);
        let song = (info.path.split('/').pop() || '').split('.');
        song.pop();
        song = song.join('.');

        byId('jarvis-vlc').innerHTML = song + ' [' + (info.state === 'playing' ? time : info.state) + ']';
        byId('jarvis-vlc-volume').innerHTML = 'Music ' + info.volume + '%';
      }

      handlers.onmouse = function (info) {
        if (info === undefined) {
          byId('jarvis-mouse').innerHTML = 'Offline';
          return;
        }

        byId('jarvis-mouse').innerHTML = 'X ' + info.pos.x + ', Y ' + info.pos.y + ', Clicks ' + info.clicks;
      }

      handlers.onkeyboard = function (info) {
        if (info === undefined) {
          byId('jarvis-keyboard').innerHTML = 'Offline';
          return;
        }

        byId('jarvis-keyboard').innerHTML = info.pressed + ' key' + (info.pressed > 1 ? 's' : '') + ' [last 60s]';
      }

      handlers.onwindow = function (info) {
        if (info === undefined) {
          byId('jarvis-window').innerHTML = 'Offline';
          return;
        }

        let name = info.name.split('_').map(w => w.charAt(0).toUpperCase() + w.substr(1)).join(' ');
        byId('jarvis-window').innerHTML = 'Linux / ' + name;
      }

      function byId (id) {
        if (!elems[id]) {
          elems[id] = document.getElementById(id);
        }
        return elems[id];
      }

      function fmtMSS(s){return(s-(s%=60))/60+(9<s?':':':0')+s}
    })();
    </script>
</body>
</html>
